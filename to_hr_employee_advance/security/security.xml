<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
    	<!-- Groups -->
    	<record model="ir.module.category" id="base.module_category_human_resources_advance">
            <field name="name">Employee Advance</field>
            <field name="description">Helps you manage your employee advance request.</field>
            <field name="sequence">7</field>
        </record>
        
        <record id="group_employee_advance_user" model="res.groups">
	        <field name="name">User</field>
	        <field name="category_id" ref="base.module_category_human_resources_advance"/>
	        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
	        <field name="comment">Users belong to this group have all permissions with their records excepts accounting objects</field>
    	</record>
    	
    	<record id="group_employee_advance_approver" model="res.groups">
	        <field name="name">Approver</field>
	        <field name="category_id" ref="base.module_category_human_resources_advance"/>
	        <field name="implied_ids" eval="[(4, ref('group_employee_advance_user'))]"/>
	        <field name="comment">Users belong to this group can approve employee advance request</field>
    	</record>
    	
    	<record id="group_employee_advance_manager" model="res.groups">
	        <field name="name">Administrator</field>
	        <field name="category_id" ref="base.module_category_human_resources_advance"/>
	        <field name="implied_ids" eval="[(4, ref('group_employee_advance_approver'))]"/>
	        <field name="comment">Users belong to this group have total control on this application</field>
	        <field name="users" eval="[(4, ref('base.user_root')),(4, ref('base.user_admin'))]"/>
    	</record>
    	
	    <!-- Rules -->
	    <record id="property_rule_advance_manager" model="ir.rule">
            <field name="name">Manager - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_manager')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>
	    
        <record id="property_rule_advance_approver" model="ir.rule">
            <field name="name">Approver - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_approver')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="0" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>
        
        <record id="property_rule_advance_approver_additional" model="ir.rule">
            <field name="name">Approver - Employee Advance Rule(Additional)</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_approver')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>
        
        <!-- <record id="property_rule_advance_user_read" model="ir.rule">
            <field name="name">User - Employee Advance Rule (Read, Create)</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4,ref('to_hr_employee_advance.group_employee_advance_user'))]"/>
            <field eval="1" name="perm_read" />
            <field eval="1" name="perm_create" />
            <field eval="0" name="perm_write" />
			<field eval="0" name="perm_unlink" />
        </record>-->
        
        <record id="property_rule_advance_user" model="ir.rule">
            <field name="name">User - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_user')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>
        <!-- Accounting group -->
        <record id="property_rule_advance_accounting" model="ir.rule">
            <field name="name">Accounting - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">['|','|',('state','=','validate'),('state','=','spent'),('state','=','done')]</field>
            <field name="groups" eval="[(6,0,[ref('account.group_account_user')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>
    </data>
</odoo>