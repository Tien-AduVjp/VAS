<odoo>
    <data>
    	<record id="module_category_employee_advance" model="ir.module.category">
            <field name="name">Employee Advance</field>
            <field name="description">Helps you manage your employee advance request.</field>
            <field name="sequence">7</field>
        </record>

    	<!-- Groups -->
        <record id="group_employee_advance_user" model="res.groups">
	        <field name="name">User</field>
	        <field name="category_id" ref="module_category_employee_advance"/>
	        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
	        <field name="comment">Users belong to this group have all permissions with their records excepts accounting objects</field>
    	</record>

    	<record id="group_employee_advance_approver" model="res.groups">
	        <field name="name">Approver</field>
	        <field name="category_id" ref="module_category_employee_advance"/>
	        <field name="implied_ids" eval="[(4, ref('group_employee_advance_user'))]"/>
	        <field name="comment">Users belong to this group can approve employee advance request</field>
    	</record>

    	<record id="group_employee_advance_manager" model="res.groups">
	        <field name="name">Administrator</field>
	        <field name="category_id" ref="module_category_employee_advance"/>
	        <field name="implied_ids" eval="[(4, ref('group_employee_advance_approver'))]"/>
	        <field name="comment">Users belong to this group have total control on this application</field>
	        <field name="users" eval="[(4, ref('base.user_root')),(4, ref('base.user_admin'))]"/>
    	</record>
    </data>

	<data>
	    <!-- Rules -->
	    <record id="property_rule_advance_manager" model="ir.rule">
            <field name="name">Manager - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_manager')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>

        <record id="property_rule_advance_approver" model="ir.rule">
            <field name="name">Approver - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_approver')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="0" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>

        <record id="property_rule_advance_approver_additional" model="ir.rule">
            <field name="name">Approver - Employee Advance Rule(Additional)</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_approver')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>

        <record id="property_rule_advance_user" model="ir.rule">
            <field name="name">User - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
            <field name="groups" eval="[(6,0,[ref('to_hr_employee_advance.group_employee_advance_user')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>
        
		<record id="employee_reconcile_rule_advance_user" model="ir.rule">
			<field name="name">User - Employee Advance Reconcile Rule</field>
			<field name="model_id" ref="model_employee_advance_reconcile" />
			<field name="groups" eval="[(6, 0, [ref('to_hr_employee_advance.group_employee_advance_user')])]"/>
			<field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
		</record>
		
        <!-- Accounting group -->
        <record id="property_rule_advance_accounting" model="ir.rule">
            <field name="name">Accounting - Employee Advance Rule</field>
            <field name="model_id" ref="model_employee_advance"/>
            <field name="domain_force">[('state','in',('validate','done'))]</field>
            <field name="groups" eval="[(6,0,[ref('account.group_account_user')])]"/>
            <field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
        </record>

		<record id="employee_reconcile_rule_account_user" model="ir.rule">
			<field name="name">Account User - Employee Advance Reconcile Rule</field>
			<field name="model_id" ref="model_employee_advance_reconcile" />
			<field name="groups" eval="[(6, 0, [ref('account.group_account_user')])]"/>
			<field name="domain_force">[(1, '=', 1)]</field>
		</record>
		
		<!-- Multi Company rule -->
		<record id="employee_advance_rule_multicompany" model="ir.rule">
			<field name="name">Multi-company rule on each employee advance</field>
			<field name="model_id" ref="model_employee_advance" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
			<field name="global" eval="True" />
		</record>

		<record id="employee_advance_reconcile_rule_multicompany" model="ir.rule">
			<field name="name">Multi-company rule on each employee advance reconcile</field>
			<field name="model_id" ref="model_employee_advance_reconcile" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
			<field name="global" eval="True" />
		</record>
    </data>
</odoo>
