<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record model="ir.ui.view" id="view_partner_form">
		<field name="name">res.partner.form</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="base.view_partner_form" />
		<field name="arch" type="xml">
			<xpath expr="//page[@name='internal_notes']" position="before">
				<page name="fleet_trip" string="Fleet Trips" attrs="{'invisible':[('trip_waypoint_ids','=',[])]}">
					<field name="trip_waypoint_ids" invisible="1" />
					<group>
						<group>
							<field name="default_stop_duration" attrs="{'invisible':[('trip_waypoint_ids','=',[])]}" />
						</group>
						<group>
							<field name="ave_stop_duration" attrs="{'invisible':[('trip_waypoint_ids','=',[])]}" />
						</group>
					</group>
				</page>
			</xpath>
		</field>
	</record>
	
	<record id="fleet_done_trip_action" model="ir.actions.act_window">
		<field name="name">Done Trips</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">fleet.vehicle.trip</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('state','=','done')]</field>
		<field name="context">{'search_default_driver_id': active_id}</field>
	</record>
	
	<record model="ir.ui.view" id="fleet_driver_view_form">
		<field name="name">fleet.driver.form</field>
		<field name="model">res.partner</field>
		<field name="inherit_id" ref="to_fleet_driver.fleet_driver_view_form" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='type']" position="before">
				<div class="oe_button_box" name="button_box">
					<button class="oe_stat_button" type="action"
						name="%(to_fleet_operation_planning.fleet_done_trip_action)d" icon="fa-bus">
						<field string="Done Trips" name="driver_done_trip_count" widget="statinfo" />
					</button>
				</div>
			</xpath>
		</field>
	</record>

</odoo>