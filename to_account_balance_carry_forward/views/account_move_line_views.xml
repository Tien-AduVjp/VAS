<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<record id="view_move_line_tree" model="ir.ui.view">
			<field name="name">account.move.line.tree</field>
			<field name="model">account.move.line</field>
			<field name="inherit_id" ref="account.view_move_line_tree" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='parent_state']" position="after">
					<field name="forward_aml_id" optional="hide" />
				</xpath>
			</field>
		</record>

		<record id="view_move_line_form" model="ir.ui.view">
			<field name="name">account.move.line.form</field>
			<field name="model">account.move.line</field>
			<field name="inherit_id" ref="account.view_move_line_form" />
			<field name="arch" type="xml">
				<xpath expr="//page[@name='information']" position="inside">
					<div id="forward_aml_id">
						<group string="Balance Carry Forward">
							<field name="forward_aml_id" />
						</group>
						<label for="forwarded_from_aml_ids" />
						<div>
							<field name="forwarded_from_aml_ids" />
						</div>
					</div>
				</xpath>
			</field>
		</record>

		<record id="view_account_move_line_filter" model="ir.ui.view">
			<field name="name">Journal Items</field>
			<field name="model">account.move.line</field>
			<field name="inherit_id"
				ref="account.view_account_move_line_filter" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='date']" position="after">
					<separator />
					<field name="balance_carry_forward_id" />
				</xpath>
				<xpath expr="//filter[@name='receivable']" position="after">
					<separator />
					<filter string="Balance not forwarded"
						domain="[('forward_aml_id', '=', False)]"
						name="ftr_balance_not_forwarded"
						help="Show journal items the balance of which is already forwarded" />
					<filter string="Balance forwarded"
						domain="[('forward_aml_id','!=',False)]"
						name="ftr_balance_forwarded"
						help="Show journal items the balance of which is NOT yet forwarded" />
					<separator />
					<filter string="Closing Items"
						domain="[('forwarded_from_aml_ids', '!=', False)]"
						name="ftr_closing_aml"
						help="Show journal items that are holding balance carried forward)" />
				</xpath>
			</field>
		</record>

		<record id="action_balance_carry_forward_entry"
			model="ir.actions.server">
			<field name="name">Carry Balance Forward</field>
			<field name="model_id" ref="account.model_account_move_line" />
			<field name="binding_model_id"
				ref="account.model_account_move_line" />
			<field name="state">code</field>
			<field name="code">action = records.action_carry_balance_forward_entry()</field>
		</record>

	</data>
</odoo>
