<odoo>
	<data>
		<record id="approval_request_view_form" model="ir.ui.view">
			<field name="name">approval.request.form</field>
			<field name="model">approval.request</field>
			<field name="inherit_id" ref="to_approvals.approval_request_view_form" />
			<field name="arch" type="xml">
			    <xpath expr="//page[@name='approval_user']" position="before">
			         <page name="timesheet" string="Timesheets" attrs="{'invisible': [('type', '!=', 'timesheets')]}">
			             <field name="timesheet_line_ids" effect="{'remove_only_reference_from_one2many': true}"
                            context="{'form_view_ref': 'to_hr_timesheet_approval.hr_timesheet_line_form'}" options="{'no_open':True}">
                            <tree editable="bottom">
                                <field name="date" />
                                <field name="name" />
                                <field name="employee_id"/>
                                <field name="project_id" required="1"
                                    context="{'form_view_ref': 'project.project_project_view_form_simplified'}" />
                                <field name="task_id"
                                    context="{'default_project_id': project_id}"
                                    domain="[('project_id', '=', project_id)]" />
                                <field name="unit_amount" widget="timesheet_uom" sum="Total" />
                                <field name="timesheet_state" />
                                <field name="company_id" invisible="1" />
                                <button name="action_refuse" type="object" string="Refuse"
                                    attrs="{'invisible':[('timesheet_state', 'not in', ['confirm', 'validate'])], 'column_invisible': [('parent.can_refuse', '=', False)]}"
                                    class="btn btn-sm btn-primary" />
                                <button name="action_cancel" type="object" string="Cancel"
                                    attrs="{'invisible':[('timesheet_state', 'not in', ['refuse', 'validate'])], 'column_invisible': [('parent.can_cancel', '=', False)]}"
                                    class="btn btn-sm btn-primary" />
                            </tree>
                        </field>
			         </page>
				</xpath>
			</field>
		</record>
	</data>
</odoo>
