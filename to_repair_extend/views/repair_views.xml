<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="view_repair_order_form">
			<field name="name">repair.order.form</field>
			<field name="model">repair.order</field>
			<field name="inherit_id" ref="repair.view_repair_order_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='user_id']" position="after">
					<field name="supervisor_id" />
				</xpath>
				<xpath expr="//field[@name='quotation_notes']"
					position="after">
					<field name="feedback" placeholder="Customer's Feedback" />
					<field name="forecast" placeholder="Forecast" />
				</xpath>
				<xpath expr="//field[@name='location_id']" position="before">
					<field name="repair_date" />
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="repair_history_list_tree_view">
			<field name="name">repair.history.list.tree</field>
			<field name="model">repair.order</field>
			<field name="priority">100</field>
			<field name="arch" type="xml">
				<tree string="Repair History Tree">
					<field name="name" />
					<field name="lot_id" />
					<field name="product_id" />
					<field name="partner_id" />
					<field name="address_id" />
					<field name="company_id" groups="base.group_multi_company"
						invisible="1" />
					<field name="guarantee_limit" />
					<field name="repair_date" />
					<field name="user_id" />
					<field name="supervisor_id" />
					<field name="state" invisible="1" />
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window"
			id="action_repair_history">
			<field name="name">Repair History</field>
			<field name="res_model">repair.order</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="repair_history_list_tree_view" />
		</record>

		<record id="view_repair_order_form_filter" model="ir.ui.view">
			<field name="name">repair.order.select</field>
			<field name="model">repair.order</field>
			<field name="inherit_id"
				ref="repair.view_repair_order_form_filter" />
			<field name="arch" type="xml">
				<xpath expr="//search/field[@name='partner_id']"
					position="after">
					<field name="lot_id" string="Lot/Serial" />
					<filter name="ftr_lot_id" string="Lot/Serial" domain="[]"
						context="{'group_by':'lot_id'}" />
				</xpath>
			</field>
		</record>

		<report id="to_report_repair" model="repair.order"
			string="Repair Report (PDF)" report_type="qweb-pdf"
			name="to_repair_extend.report_repair"
			file="to_repair_extend.report_repair"
			print_report_name="'Repair Report - %s' % (object.name)" />

		<record id="to_report_repair" model="ir.actions.report">
			<field name="paperformat_id"
				ref="to_repair_extend.to_repair_report_landscape" />
		</record>

		<menuitem id="repair.repair_menu" name="Orders"
			parent="repair.repair_menu_reporting"
			action="repair.action_repair_order_graph" />

		<menuitem id="menu_repair_report_all" name="Repair Analysis"
			action="action_repair_report_all"
			parent="repair.repair_menu_reporting" sequence="1" />
	</data>
</odoo>
