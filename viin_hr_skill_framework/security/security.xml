<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record model="ir.module.category"
			id="base.module_category_human_resources_skills">
			<field name="description">Build employee skills framework for your company.</field>
			<field name="sequence">10</field>
		</record>
		<record id="group_skill_officer" model="res.groups">
			<field name="name">Officer</field>
			<field name="implied_ids" eval="[(4, ref('base.group_user'))]" />
			<field name="category_id" ref="base.module_category_human_resources_skills" />
			<field name="comment">Users belong to this group can build and manage
				skill framework for his subordinates and department employees where
				she or he is the manager</field>
		</record>
		<record id="group_skill_admin" model="res.groups">
			<field name="name">Administrator</field>
			<field name="implied_ids" eval="[(4, ref('group_skill_officer')),(4,ref('hr.group_hr_user'))]" />
			<field name="category_id" ref="base.module_category_human_resources_skills" />
			<field name="comment">Users belong to this group have total control on this application</field>
			<field name="users" eval="[(4, ref('base.user_root')),(4, ref('base.user_admin'))]"/>
		</record>
	</data>

	<data>
		<record id="skill_report_personal_rule" model="ir.rule">
			<field name="name">Skills Report - Personal</field>
			<field name="model_id" ref="model_hr_employee_skill_report"/>
	        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
			<field name="perm_read" eval="1" />
			<field name="perm_write" eval="0" />
			<field name="perm_create" eval="0" />
			<field name="perm_unlink" eval="0" />
			<field name="groups" eval="[(4, ref('base.group_user'))]"/>
		</record>
		<record id="skill_report_skill_officer_rule" model="ir.rule">
			<field name="name">Skills Report - Skill Officer</field>
			<field name="model_id" ref="model_hr_employee_skill_report"/>
			<!-- TODO: change the domain_force as below in 14+/master
			<field name="domain_force">[
				('employee_id.parent_ids', 'in', (user.employee_id | user.employee_ids).ids),
				]</field>
			 -->
	        <field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
			<field name="perm_read" eval="1" />
			<field name="perm_write" eval="0" />
			<field name="perm_create" eval="0" />
			<field name="perm_unlink" eval="0" />
			<field name="groups" eval="[(4, ref('viin_hr_skill_framework.group_skill_officer'))]"/>
		</record>
		<record id="skill_report_hr_officer_rule" model="ir.rule">
			<field name="name">Skills Report - HR Officer (All Report)</field>
			<field name="model_id" ref="model_hr_employee_skill_report"/>
	        <field name="domain_force">[(1, '=', 1)]</field>
			<field name="perm_read" eval="1" />
			<field name="perm_write" eval="0" />
			<field name="perm_create" eval="0" />
			<field name="perm_unlink" eval="0" />
			<field name="groups" eval="[(4, ref('hr.group_hr_user'))]"/>
		</record>
		
		<record id="skill_report_skill_admin_rule" model="ir.rule">
			<field name="name">Skills Report - Administrator (All Reports)</field>
			<field name="model_id" ref="model_hr_employee_skill_report"/>
	        <field name="domain_force">[(1, '=', 1)]</field>
			<field name="perm_read" eval="1" />
			<field name="perm_write" eval="0" />
			<field name="perm_create" eval="0" />
			<field name="perm_unlink" eval="0" />
			<field name="groups" eval="[(4, ref('viin_hr_skill_framework.group_skill_admin'))]"/>
		</record>
	</data>
</odoo>
