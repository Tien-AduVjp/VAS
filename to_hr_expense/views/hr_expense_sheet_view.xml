<odoo>
	<record id="view_hr_expense_sheet_form" model="ir.ui.view">
		<field name="name">hr.expense.sheet.form</field>
		<field name="model">hr.expense.sheet</field>
		<field name="inherit_id" ref="hr_expense.view_hr_expense_sheet_form" />
		<field name="arch" type="xml">
			<field name="state" position="before">
				<button name="action_cancel" string="Cancel" type="object" states="post,done" groups="account.group_account_user" />
			</field>
			<xpath expr="//button[@name='action_register_payment']" position="attributes">
				<attribute name="attrs">{'invisible':['|', ('state', '!=', 'post'), ('is_paid', '=', True)]}</attribute>
			</xpath>
			<xpath expr="//field[@name='account_move_id']" position="before">
				<field name="move_ids" invisible="1"/>
				<field name="is_paid" invisible="1" />
			</xpath>
			<xpath expr="//field[@name='expense_line_ids']/tree/field[@name='tax_ids']" position="before">
				<field name="to_invoice" />
				<field name="vendor_id" />
				<field name="untaxed_amount" />
			</xpath>
			<button name="action_get_attachment_view" position="after">
				<button name="action_view_payments" class="oe_stat_button" icon="fa-dollar" type="object" groups="account.group_account_user">
					<field name="payments_count" widget="statinfo" string="Payments" />
				</button>
				<button name="action_view_moves" class="oe_stat_button" icon="fa-bars" type="object" groups="account.group_account_user">
					<field name="move_count" widget="statinfo" string="Journal Entries" />
				</button>
			</button>
			<xpath expr="//field[@name='account_move_id']" position="attributes">
				<attribute name="invisible">1</attribute>
			</xpath>
			<field name="user_id" position="after">
				<field name="has_invoice"/>
			</field>
			<field name="journal_id" position="after">
				<field name="vendor_bill_journal_id" options="{'no_open': True, 'no_create': True}"
					attrs="{'invisible': [('has_invoice', '=', False)], 'required': [('has_invoice', '=', True)]}"/>
			</field>
		</field>
	</record>

	<record id="hr_expense_sheet_view_search" model="ir.ui.view">
		<field name="name">hr.expense.sheet.search</field>
		<field name="model">hr.expense.sheet</field>
		<field name="inherit_id" ref="hr_expense.hr_expense_sheet_view_search" />
		<field name="arch" type="xml">
			<filter name="canceled" position="after">
				<separator />
				<filter string="Has Invoice" name="ftr_has_invoice" domain="[('has_invoice', '=', True)]"
					help="Expense Sheet has invoice"/>
			</filter>
		</field>
	</record>

	<!-- TODO: remove in 15.0 because it added from 15.0 -->
	<record id="view_hr_expense_sheet_tree" model="ir.ui.view">
		<field name="name">hr.expense.sheet.tree</field>
		<field name="model">hr.expense.sheet</field>
		<field name="inherit_id" ref="hr_expense.view_hr_expense_sheet_tree" />
		<field name="arch" type="xml">
			<field name="message_unread" position="before">
				<field name="payment_state" optional="show" decoration-info="payment_state in ('partial','in_payment')"
					decoration-success="payment_state == 'paid'" decoration-danger="payment_state in ('reversed','not_paid')"
					widget="badge"/>
			</field>
		</field>
	</record>

	<!-- TODO: remove in 15.0 because it added from 15.0 -->
	<record id="view_hr_expense_sheet_form_payment_state_ribbon" model="ir.ui.view">
		<field name="name">hr.expense.sheet.form</field>
		<field name="model">hr.expense.sheet</field>
		<field name="inherit_id" ref="hr_expense.view_hr_expense_sheet_form" />
		<field name="priority">1000</field>
		<field name="arch" type="xml">
			<xpath expr="//widget[@name='web_ribbon']" position="replace">
				<field name="payment_state" invisible="True"/>
                <widget name="web_ribbon" title="Paid" bg_color="bg-success" attrs="{'invisible': [('payment_state', '!=', 'paid')]}"/>
                <widget name="web_ribbon" title="Partial" bg_color="bg-info" attrs="{'invisible': [('payment_state', '!=', 'partial')]}"/>
                <widget name="web_ribbon" title="Reversed" bg_color="bg-danger" attrs="{'invisible': [('payment_state', '!=', 'reversed')]}"/>
                <widget name="web_ribbon" title="In Payment" attrs="{'invisible': [('payment_state', '!=', 'in_payment')]}"/>
			</xpath>
		</field>
	</record>

</odoo>
