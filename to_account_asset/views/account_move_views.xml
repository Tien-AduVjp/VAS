<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<!-- Add "Asset Category" to supplier invoices -->
	<record model="ir.ui.view" id="view_invoice_asset_category">
		<field name="name">account.move.form</field>
		<field name="model">account.move</field>
		<field name="inherit_id" ref="account.view_move_form" />
		<field name="arch" type="xml">
			<xpath expr="//header/button[last()]" position="after">
				<button name="action_view_account_assets" type="object"
					string="View Assets" groups="to_account_asset.group_asset_manager"
					attrs="{'invisible': ['|',('account_assets_count','=',0),('move_type','not in',['in_invoice','in_refund'])]}">
					<field name="account_assets_count" invisible="1" />
				</button>
			</xpath>
			<!-- inssert asset_category_id into invoice lines - a subset of account
				move lines -->
			<xpath
				expr="//field[@name='invoice_line_ids']/tree/field[@name='account_id']"
				position="before">
				<field name="asset_category_id"
					domain="[('type','=','purchase')]"
					context="{'default_type':'purchase'}"
					groups="account.group_account_invoice"
					attrs="{'column_invisible': [('parent.move_type', 'not in', ['in_invoice','in_refund'])]}" />
			</xpath>
			<!-- insert asset_category_id into account move lines. Without this, we
				will lost asset_category_id information when saving -->
			<xpath
				expr="//field[@name='line_ids']/tree/field[@name='account_id']"
				position="after">
				<field name="asset_category_id" invisible="1" />
			</xpath>
		</field>
	</record>

</odoo>
