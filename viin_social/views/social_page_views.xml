<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
	<data>
		<record id="social_page_action" model="ir.actions.act_window">
			<field name="name">Page</field>
			<field name="res_model">social.page</field>
			<field name="view_mode">kanban,tree,form,pivot</field>
		</record>

		<record id="action_discuss" model="ir.actions.client">
	            <field name="name">Social Conversation</field>
	            <field name="tag">viin_social.conversation</field>
	            <field name="res_model">mail.channel</field>
	            <field name="params" eval="&quot;{
	                'default_active_id': 'mailbox_inbox'
	            }&quot;"/>
		</record>

		<record id="social_page_view_kanban" model="ir.ui.view">
			<field name="name">Page</field>
			<field name="model">social.page</field>
			<field name="arch" type="xml">
				<kanban create="false" default_group_by="media_id" group_create="false">
					<field name="id"/>
					<field name="name"/>
					<field name="media_id"/>
					<field name="image"/>
					<field name="follower_count"/>
					<field name="view_count"/>
					<field name="like_count"/>
					<field name="comment_count"/>
					<field name="share_count"/>
					<field name="click_count"/>
					<field name="engagement_count"/>
					<templates>
						<t t-name="kanban-box">
							<div class="oe_kanban_global_click mb-3">
								<div class="pb-3">
									<div class="o_kanban_image">
										<img t-att-src="kanban_image('social.page', 'image', record.id.raw_value)" alt="Social Page"/>
									</div>
									<div>
										<h3>
											<field name="name"/>
										</h3>
 									</div>
								</div>
								<hr class="mt-5 mb-2"></hr>
								<div class="kanban_social_page_footer oe_kanban_record_bottom">
									<div class="d-flex justify-content-start">
										<div class="total-followers">
											<i class="fa fa-users" title="Followers"/>
                        					<b t-esc="record.follower_count.raw_value"/>
										</div>
										<t t-if="record.like_count.raw_value">
											<div class="ml-4">
												<i class="fa fa-thumbs-up" title="Total Likes"/>
	                        					<b t-esc="record.like_count.raw_value"/>
											</div>
										</t>
										<t t-if="record.share_count.raw_value">
											<div class="ml-4">
												<i class="fa fa-share-alt" title="Total Shares"/>
	                        					<b t-esc="record.share_count.raw_value"/>
											</div>
										</t>
										<t t-if="record.view_count.raw_value">
											<div class="ml-4">
												<i class="fa fa-eye" title="Total Views"/>
	                        					<b t-esc="record.view_count.raw_value"/>
											</div>
										</t>
										<t t-if="record.comment_count.raw_value">
											<div class="ml-4">
												<i class="fa fa-comment" title="Total Comments"/>
	                        					<b t-esc="record.comment_count.raw_value"/>
											</div>
										</t>
										<t t-if="record.click_count.raw_value">
											<div class="ml-4">
												<i class="fa fa-mouse-pointer" title="Total Clicks"/>
	                        					<b t-esc="record.click_count.raw_value"/>
											</div>
										</t>
										<t t-if="record.engagement_count.raw_value">
											<div class="ml-4">
												<i class="fa fa-bullseye" title="Total Engagements"/>
	                        					<b t-esc="record.engagement_count.raw_value"/>
											</div>
										</t>
									</div>
								</div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>

		<record id="social_page_view_form" model="ir.ui.view">
			<field name="name">Social Page</field>
			<field name="model">social.page</field>
			<field name="arch" type="xml">
				<form duplicate="false">
					<header>
						<button name="action_sinchronized_post" string="Synchronize Posts" type="object" class="oe_highlight"/>
						<button name="action_get_social_page_message" string="Get Message" type="object" class="oe_highlight"/>
					</header>
					<sheet>
                        <div name="button_box" class="oe_button_box"> 
                        	<button name="%(action_discuss)d" class="oe_stat_button" string="Message" icon="fa-comments" type="action"
                        	context="{'default_page_id':id}">
                        	</button>
                        </div>
						<field name="image" widget="image" class="oe_avatar"/>
						<group>
							<group>
								<field name="name"/>
								<field name="description"/>
								<field name="social_provider"/>
								<field name="media_id" groups="viin_social.viin_social_group_admin"/>
								<field name="assign_id"/>
								<field name="member_ids" widget="many2many_tags"/>
							</group>
							<group>
								<field name="social_page_url"/>
								<field name="social_page_id"/>
							</group>
						</group>
						<notebook>
								<page string="Insights">
									<group>
										<group>
											<field name="follower_count"/>
											<field name="click_count"/>
											<field name="engagement_count"/>
										</group>
										<group>
											<field name="view_count"/>
											<field name="like_count"/>
											<field name="comment_count"/>
											<field name="share_count"/>
										</group>
									</group>
								</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record id="social_page_view_pivot" model="ir.ui.view">
			<field name="name">Social Page</field>
			<field name="model">social.page</field>
			<field name="arch" type="xml">
				<pivot>
					<field name="media_id" type="row"/>
	    			<field name="name" type="row"/>
	    			<field name="follower_count" type="measure"/>
	    			<field name="like_count" type="measure"/>
	    			<field name="comment_count" type="measure"/>
	    			<field name="share_count" type="measure"/>
	    			<field name="click_count" type="measure"/>
	    			<field name="view_count" type="measure"/>
	    			<field name="engagement_count" type="measure"/>
    			</pivot>
			</field>
		</record>
			
		<menuitem id="social_page_configuration_menu" name="Page" parent="social_configuration_menu" 
		action="social_page_action" sequence="15"/>
		<menuitem id="social_page_info_menu" name="Page Info" parent="social_page_menu" 
		action="social_page_action" sequence="10"/>
		<menuitem id="social_page_message_menu" name="Conversations" parent="social_page_menu" 
		action="action_discuss" sequence="11"/>
	</data>
</odoo>
