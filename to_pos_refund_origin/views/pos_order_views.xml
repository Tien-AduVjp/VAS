<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="view_pos_order_filter">
			<field name="name">pos.order.list.select</field>
			<field name="model">pos.order</field>
			<field name="inherit_id" ref="point_of_sale.view_pos_order_filter" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='session_id']" position="after">
					<separator />
					<filter string="Return Orders" name="ftr_refund_orders"
						domain="[('refund_original_order_id','!=', False)]" />
				</xpath>
				<xpath expr="//group" position="inside">
					<filter string="Original Orders" name="grp_refund_original_order_id" domain="[]" context="{'group_by':'refund_original_order_id'}"/>
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="view_pos_order_tree">
			<field name="name">pos.order.tree</field>
			<field name="model">pos.order</field>
			<field name="inherit_id" ref="point_of_sale.view_pos_order_tree" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='name']" position="after">
					<field name="refund_original_order_id" string="Return for"/>
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="view_pos_pos_form">
			<field name="name">pos.order.form</field>
			<field name="model">pos.order</field>
			<field name="inherit_id" ref="point_of_sale.view_pos_pos_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='user_id']" position="after">
					<field name="refund_original_order_id" readonly="1"/>
				</xpath>
				<xpath expr="//div[@name='button_box']" position="inside">
					<button type="object" name="action_view_refund_orders"
							class="oe_stat_button" icon="fa-undo"
							attrs="{'invisible':[('refund_order_count','=', 0)]}">
						<field name="refund_order_count" widget="statinfo"
							   string="Return Orders"/>
					</button>
				</xpath>
			</field>
		</record>
	</data>
</odoo>
