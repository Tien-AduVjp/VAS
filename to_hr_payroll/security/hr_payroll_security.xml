<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<data>
		<record model="ir.module.category"
			id="base.module_category_human_resources_payroll">
			<field name="description">Helps you manage your payrolls.</field>
			<field name="sequence">16</field>
		</record>

		<record id="group_hr_payroll_team_leader" model="res.groups">
			<field name="name">Team Leader</field>
			<field name="category_id"
				ref="base.module_category_human_resources_payroll" />
			<field name="implied_ids"
				eval="[(4, ref('base.group_user'))]" />
			<field name="comment">View own payslips and the subordinates'</field>
		</record>

		<record id="group_hr_payroll_user" model="res.groups">
			<field name="name">Officer</field>
			<field name="category_id"
				ref="base.module_category_human_resources_payroll" />
			<field name="implied_ids"
				eval="[(4, ref('to_hr_payroll.group_hr_payroll_team_leader')),(4, ref('hr.group_hr_user'))]" />
			<field name="comment">Granted with full access rights to all payslips and payslip batches</field>
		</record>

		<record id="group_hr_payroll_manager" model="res.groups">
			<field name="name">Administrator</field>
			<field name="category_id"
				ref="base.module_category_human_resources_payroll" />
			<field name="implied_ids"
				eval="[(4, ref('to_hr_payroll.group_hr_payroll_user')), (4, ref('hr_contract.group_hr_contract_manager'))]" />
			<field name="users"
				eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]" />
			<field name="comment">Full access rights to Payroll application</field>
		</record>
	</data>

	<data noupdate="1">
		<record id="base.default_user" model="res.users">
			<field name="groups_id"
				eval="[(4,ref('to_hr_payroll.group_hr_payroll_manager'))]" />
		</record>

		<record id="hr_contract_rule_officer" model="ir.rule">
            <field name="name">Officer - All contracts (View only)</field>
            <field name="model_id" ref="model_hr_contract" />
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups"
                eval="[(4, ref('to_hr_payroll.group_hr_payroll_user'))]" />
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>

        <record id="hr_contract_rule_admin" model="ir.rule">
            <field name="name">Administrator - All contracts</field>
            <field name="model_id" ref="model_hr_contract" />
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups"
                eval="[(4, ref('to_hr_payroll.group_hr_payroll_manager'))]" />
            <field eval="1" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="1" name="perm_create"/>
        </record>

		<record id="hr_payroll_personal_payslip" model="ir.rule">
			<field name="name">Personal Payslips</field>
			<field name="model_id" ref="model_hr_payslip" />
			<field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
			<field name="groups"
				eval="[(4, ref('base.group_user'))]" />
			<field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
		</record>

		<record id="hr_payroll_personal_payslip_line" model="ir.rule">
			<field name="name">Personal Payslip Lines</field>
			<field name="model_id" ref="model_hr_payslip_line" />
			<field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
			<field name="groups"
				eval="[(4, ref('base.group_user'))]" />
			<field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
		</record>

		<record id="hr_payslip_team_leader" model="ir.rule">
			<field name="name">Team Leader and subordinates Payslips</field>
			<field name="model_id" ref="model_hr_payslip" />
			<field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
			<field name="groups"
				eval="[(4, ref('to_hr_payroll.group_hr_payroll_team_leader'))]" />
			<field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
		</record>

		<record id="hr_payroll_rule_officer" model="ir.rule">
			<field name="name">Officer - All Payslips</field>
			<field name="model_id" ref="model_hr_payslip" />
			<field name="domain_force">[(1, '=', 1)]</field>
			<field name="groups"
				eval="[(4, ref('to_hr_payroll.group_hr_payroll_user'))]" />
			<field eval="1" name="perm_unlink"/>
            <field eval="1" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="1" name="perm_create"/>
		</record>

		<record id="hr_payslip_line_team_leader" model="ir.rule">
			<field name="name">Team Leader and subordinates Payslip Lines</field>
			<field name="model_id" ref="model_hr_payslip_line" />
			<field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
			<field name="groups"
				eval="[(4, ref('to_hr_payroll.group_hr_payroll_team_leader'))]" />
			<field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
		</record>

		<record id="hr_payroll_line_rule_officer" model="ir.rule">
			<field name="name">Officer - All Payslip Lines</field>
			<field name="model_id" ref="model_hr_payslip_line" />
			<field name="domain_force">[(1, '=', 1)]</field>
			<field name="groups"
				eval="[(4, ref('to_hr_payroll.group_hr_payroll_user'))]" />
			<field eval="1" name="perm_unlink"/>
			<field eval="1" name="perm_write"/>
			<field eval="1" name="perm_read"/>
			<field eval="1" name="perm_create"/>
		</record>

        <record id="payslip_personal_income_tax_analysis_hr_payroll_user" model="ir.rule">
            <field name="name">Personal Income Tax Analysis</field>
            <field name="model_id" ref="model_payslip_personal_income_tax_analysis" />
            <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
            <field name="groups"
                eval="[(4, ref('base.group_user'))]" />
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>

        <record id="payslip_personal_income_tax_analysis_team_leader" model="ir.rule">
            <field name="name">Personal Income Tax Analysis - Team Leader</field>
            <field name="model_id" ref="model_payslip_personal_income_tax_analysis" />
            <field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
            <field name="groups"
                eval="[(4, ref('to_hr_payroll.group_hr_payroll_team_leader'))]" />
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>

        <record id="payslip_personal_income_tax_analysis_officer" model="ir.rule">
            <field name="name">Officer - All Income Tax Analysis</field>
            <field name="model_id" ref="model_payslip_personal_income_tax_analysis" />
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups"
                eval="[(4, ref('to_hr_payroll.group_hr_payroll_user'))]" />
            <field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
        </record>

		<record id="hr_payroll_analysis_team_leader_rule" model="ir.rule">
			<field name="name">HR Payroll Analysis - Team Leader</field>
			<field name="model_id" ref="model_hr_payroll_analysis" />
			<field name="groups"
                eval="[(4, ref('to_hr_payroll.group_hr_payroll_team_leader'))]" />
			<field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
			<field eval="0" name="perm_unlink"/>
            <field eval="0" name="perm_write"/>
            <field eval="1" name="perm_read"/>
            <field eval="0" name="perm_create"/>
		</record>

		<record id="hr_payroll_analysis_payroll_officer_rule" model="ir.rule">
			<field name="name">Officer - Payroll Analysis</field>
			<field name="model_id" ref="model_hr_payroll_analysis" />
			<field name="groups"
                eval="[(4, ref('to_hr_payroll.group_hr_payroll_user'))]" />
			<field name="domain_force">[(1,'=',1)]</field>
		</record>

		<record id="hr_contribution_register_comp_rule" model="ir.rule">
			<field name="name">HR Contribution Register multi-company</field>
			<field name="model_id" ref="model_hr_contribution_register" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_salary_rule_category_comp_rule" model="ir.rule">
			<field name="name">HR Salary Rule Category multi-company</field>
			<field name="model_id" ref="model_hr_salary_rule_category" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_salary_rule_comp_rule" model="ir.rule">
			<field name="name">HR Salary Rule multi-company</field>
			<field name="model_id" ref="model_hr_salary_rule" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_payroll_structure_comp_rule" model="ir.rule">
			<field name="name">HR Salary Structure multi-company</field>
			<field name="model_id" ref="model_hr_payroll_structure" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_payslip_run_comp_rule" model="ir.rule">
			<field name="name">HR Payslip Batch multi-company</field>
			<field name="model_id" ref="model_hr_payslip_run" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_payslip_comp_rule" model="ir.rule">
			<field name="name">HR Payslip multi-company</field>
			<field name="model_id" ref="model_hr_payslip" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_payslip_line_comp_rule" model="ir.rule">
			<field name="name">HR Payslip Line multi-company</field>
			<field name="model_id" ref="model_hr_payslip_line" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_advantage_template_comp_rule" model="ir.rule">
			<field name="name">HR Advantage Template multi-company</field>
			<field name="model_id" ref="model_hr_advantage_template" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>
		<record id="hr_job_advantage_comp_rule" model="ir.rule">
			<field name="name">Job Position Advantage multi-company</field>
			<field name="model_id" ref="model_hr_job_advantage" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>
		<record id="hr_contract_advantage_comp_rule" model="ir.rule">
			<field name="name">HR Contract Advantage multi-company</field>
			<field name="model_id" ref="model_hr_contract_advantage" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_payroll_contribution_type_comp_rule" model="ir.rule">
			<field name="name">HR Payroll Contribution Type multi-company</field>
			<field name="model_id" ref="model_hr_payroll_contribution_type" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_payroll_contribution_register_comp_rule" model="ir.rule">
			<field name="name">HR Payroll Contribution Register multi-company</field>
			<field name="model_id" ref="model_hr_payroll_contribution_register" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>

		<record id="hr_payroll_analysis_comp_rule" model="ir.rule">
			<field name="name">HR Payroll Analysis multi-company</field>
			<field name="model_id" ref="model_hr_payroll_analysis" />
			<field eval="True" name="global" />
			<field name="domain_force">['|',('company_id','=',False),('company_id', 'in', company_ids)]</field>
		</record>
	</data>
</odoo>
