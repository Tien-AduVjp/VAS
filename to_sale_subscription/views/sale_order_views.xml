<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="sale_order_view_tree" model="ir.ui.view">
		<field name="name">sale.order.tree</field>
		<field name="model">sale.order</field>
		<field name="arch" type="xml">
			<tree string="Sales Orders"
				decoration-bf="message_needaction==True"
				decoration-muted="state=='cancel'">
				<field name="name" string="Order Number" />
				<field name="date_order" />
				<field name="partner_id" />
				<field name="amount_total" sum="Total Tax Included"
					widget="monetary" />
				<field name="invoice_status" />
				<field name="user_id" />
				<field name="subscription_state" />
				<field name="state" invisible="1" />
				<field name="message_needaction" invisible="1" />
			</tree>
		</field>
	</record>

	<record id="sale_order_view_form" model="ir.ui.view">
		<field name="name">sale.subscription.form</field>
		<field name="model">sale.order</field>
		<field name="inherit_id" ref="sale.view_order_form" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='order_line']/form/group/group/field[@name='product_id']" position="after">
				<field name="subscription_id" attrs="{'invisible': [('subscription_id', '=', False)]}" />
			</xpath>
			<xpath expr="//div[hasclass('oe_button_box')]/button[1]" position="before">
				<button class="oe_stat_button"
					name="action_view_subscriptions" type="object" icon="fa-book"
					attrs="{'invisible': [('subscription_count', '=', 0)]}">
					<field name="subscription_count" string="Subscriptions" widget="statinfo" />
				</button>
			</xpath>
		</field>
	</record>

</odoo>
