<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="view_hr_employee_overtime_form" model="ir.ui.view">
		<field name="name">hr.employee.overtime.form</field>
		<field name="model">hr.employee.overtime</field>
		<field name="arch" type="xml">
			<form string="Employee Overtime">
				<sheet>
					<group>
						<group>
							<field name="employee_id" />
							<field name="contract_id" />

							<field name="job_id" />
							<field name="department_id" />
							<field name="company_id" groups="base.group_multi_company" />
							<field name="currency_id" invisible="1" />
						</group>
						<group>
							<field name="date_start" />
							<field name="date_end" />
							<field name="pay_rate" />
							<field name="planned_hours" />
							<field name="planned_overtime_pay" />
							<field name="actual_hours" />
							<field name="actual_overtime_pay" />
							<field name="standard_pay" />
							<field name="resource_calendar_id" />
							<field name="global_leave_id" />
							<field name="hr_overtime_rule_id" />
						</group>
					</group>
				</sheet>
			</form>
		</field>
	</record>

	<record id="view_hr_employee_overtime_tree" model="ir.ui.view">
		<field name="name">hr.employee.overtime.tree</field>
		<field name="model">hr.employee.overtime</field>
		<field name="arch" type="xml">
			<tree string="Employee Overtime">
				<field name="employee_id" />
				<field name="date_start" />
				<field name="date_end" />
				<field name="recognition_mode" />
				<field name="tz" />
				<field name="pay_rate" />
				<field name="planned_hours" />
				<field name="planned_overtime_pay" optional="hide" />
				<field name="actual_hours" />
				<field name="actual_overtime_pay" optional="hide" />
				<field name="standard_pay" optional="hide" />
				<field name="resource_calendar_id" />
				<field name="hr_overtime_rule_id" />
				<field name="rule_code_id" />
				<field name="global_leave_id" optional="hide" />
				<field name="job_id" />
				<field name="department_id" />
				<field name="contract_id" />
				<field name="plans_count" optional="hide" />
				<field name="contracts_count" optional="hide" />
				<field name="employees_count" optional="hide" />
				<field name="company_id" groups="base.group_multi_company" />
				<field name="currency_id" invisible="1" />
			</tree>
		</field>
	</record>

	<record id="view_hr_employee_overtime_pivot" model="ir.ui.view">
		<field name="name">hr.employee.overtime.pivot</field>
		<field name="model">hr.employee.overtime</field>
		<field name="arch" type="xml">
			<pivot string="Employee Overtime Analysis"
				disable_linking="True">
				<field name="date_start" interval="month" type="col" />
				<field name="planned_hours" type="measure" />
				<field name="planned_overtime_pay" type="measure" />
				<field name="actual_hours" type="measure" />
				<field name="actual_overtime_pay" type="measure" />
				<field name="diff_hours" type="measure" />
			</pivot>
		</field>
	</record>

	<record id="view_hr_employee_overtime_graph" model="ir.ui.view">
		<field name="name">hr.employee.overtime.graph</field>
		<field name="model">hr.employee.overtime</field>
		<field name="arch" type="xml">
			<graph string="Employee Overtime Analysis">
				<field name="date_end" type="col" interval="day" />
				<field name="planned_hours" type="measure" />
				<field name="actual_hours" type="measure" />
			</graph>
		</field>
	</record>

	<record id="view_hr_employee_overtime_search" model="ir.ui.view">
		<field name="name">hr.employee.overtime.search</field>
		<field name="model">hr.employee.overtime</field>
		<field name="arch" type="xml">
			<search string="Employee Overtime Analysis">
				<field name="employee_id" />
				<separator />
				<field name="date_start" string="Start Date" />
				<field name="date_end" string="End Date" />
				<separator />
				<field name="hr_overtime_rule_id" />
				<field name="rule_code_id" />
				<separator />
				<field name="contract_id" />
				<field name="department_id" />
				<field name="job_id" />
				<separator />
				<field name="resource_calendar_id" />
				<field name="global_leave_id" />
				<separator />
				<field name="company_id" groups="base.group_multi_company" />
				<separator />
				<group expand="0" string="Extended Filters">
					<field name="employee_id" />
					<field name="job_id" />
					<field name="department_id" />
					<field name="company_id" groups="base.group_multi_company" />
				</group>
				<group expand="1" string="Group By">
					<filter string="Employee" name="grp_employee"
						context="{'group_by':'employee_id'}" />
					<filter string="Department" name="grp_department]"
						context="{'group_by':'department_id'}" />
					<filter string="Job Position" name="grp_job"
						context="{'group_by':'job_id'}" />
					<filter name="grp_res_calendar" string="Working Schedule"
						context="{'group_by':'resource_calendar_id'}" />
					<separator />
					<filter string="OT Rule" name="grp_rule"
						context="{'group_by':'hr_overtime_rule_id'}" />
					<filter string="OT Rule Code" name="grp_rule_code"
						context="{'group_by':'rule_code_id'}" />
					<separator />
					<filter string="Company" name="company"
						groups="base.group_multi_company"
						context="{'group_by':'company_id'}" />
					<separator />
					<filter string="Start Date" name="grp_date_start"
						context="{'group_by':'date_start'}" />
					<filter string="End Date" name="grp_date_end"
						context="{'group_by':'date_end'}" />
				</group>
			</search>
		</field>
	</record>

	<record id="view_hr_employee_overtime_calendar" model="ir.ui.view">
        <field name="name">hr.employee.overtime.calendar</field>
        <field name="model">hr.employee.overtime</field>
        <field name="arch" type="xml">
            <calendar
            	string="Overtime Plan"
            	event_open_popup="true" mode="month"
            	date_start="date_start" date_stop="date_end"
            	quick_add="False" color="employee_id">
                <field name="display_name" />
				<field name="employee_id" avatar_field="image_128" />
				<field name="reason_id" />
				<field name="planned_hours" />
            </calendar>
        </field>
    </record>

	<record id="action_hr_employee_overtime_report"
		model="ir.actions.act_window">
		<field name="name">Employee Overtime Analysis</field>
		<field name="res_model">hr.employee.overtime</field>
		<field name="view_mode">pivot,graph,calendar,tree,form</field>
		<field name="view_id"></field>  <!-- force empty -->
		<field name="search_view_id"
			ref="view_hr_employee_overtime_search" />
		<field name="context">{'search_default_grp_employee':1}</field>
	</record>

	<menuitem name="Overtime Analysis"
		id="menu_hr_employee_overtime" parent="menu_hr_overtime_report_main"
		sequence="7" action="action_hr_employee_overtime_report" />
</odoo>
