<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="base.module_category_human_resources_overtime" model="ir.module.category">
        <field name="description">Helps you manage your employees overtime works.</field>
        <field name="sequence">11</field>
    </record>
	<record id="group_overtime_team_approval" model="res.groups">
		<field name="name">Team Approval</field>
		<field name="category_id"
			ref="base.module_category_human_resources_overtime" />
		<field name="implied_ids" eval="[(4, ref('base.group_user'))]" />
		<field name="comment">The user will have the right to plan overtime for the subordinate that she or he manages</field>
	</record>

	<record id="group_overtime_officer" model="res.groups">
		<field name="name">Officer</field>
		<field name="category_id"
			ref="base.module_category_human_resources_overtime" />
		<field name="implied_ids" eval="[(4, ref('hr.group_hr_user')),(4, ref('viin_hr_overtime.group_overtime_team_approval'))]" />
		<field name="comment">The user will have the right to overtime planning
			and registration
		</field>
	</record>

	<record id="group_overtime_admin" model="res.groups">
		<field name="name">Administrator</field>
		<field name="category_id"
			ref="base.module_category_human_resources_overtime" />
		<field name="implied_ids"
			eval="[(4,ref('viin_hr_overtime.group_overtime_officer'))]" />
		<field name="users"
			eval="[(4,ref('base.user_root')),(4, ref('base.user_admin'))]" />
		<field name="comment">The user will have all rights to do anything within
			this application.
		</field>
	</record>

	<!-- Records Rules -->
	<data>
		<record model="ir.rule"
			id="hr_overtime_plan_line_personal_rule">
			<field name="name">Overtime Plan Line - Personal</field>
			<field name="model_id" ref="model_hr_overtime_plan_line" />
			<field name="groups" eval="[(4,ref('base.group_user'))]" />
			<field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
			<field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
		</record>

		<record model="ir.rule"
			id="hr_overtime_plan_line_team_lead_rule">
			<field name="name">Overtime Plan Line - Team Lead</field>
			<field name="model_id" ref="model_hr_overtime_plan_line" />
			<field name="groups"
				eval="[(4,ref('viin_hr_overtime.group_overtime_team_approval'))]" />
			<field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
			<field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
		</record>

		<record model="ir.rule"
			id="hr_overtime_plan_line_ot_officer_rule">
			<field name="name">Overtime Plan Line - Overtime Officer</field>
			<field name="model_id" ref="model_hr_overtime_plan_line" />
			<field name="groups"
				eval="[(4,ref('viin_hr_overtime.group_overtime_officer'))]" />
			<field name="domain_force">[(1,'=',1)]</field>
			<field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
		</record>

		<record model="ir.rule" id="hr_overtime_plan_personal_rule">
			<field name="name">Overtime Plan - Personal</field>
			<field name="model_id" ref="model_hr_overtime_plan" />
			<field name="groups" eval="[(4,ref('base.group_user'))]" />
			<field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
			<field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
		</record>

		<record model="ir.rule"
			id="hr_overtime_plan_team_lead_rule">
			<field name="name">Overtime Plan - Team Lead</field>
			<field name="model_id" ref="model_hr_overtime_plan" />
			<field name="groups"
				eval="[(4,ref('viin_hr_overtime.group_overtime_team_approval'))]" />
			<field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
			<field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
		</record>

		<record model="ir.rule" id="hr_overtime_plan_ot_officer_rule">
			<field name="name">Overtime Plan Line - Overtime Officer</field>
			<field name="model_id" ref="model_hr_overtime_plan"></field>
			<field name="groups"
				eval="[(4,ref('viin_hr_overtime.group_overtime_officer'))]" />
			<field name="domain_force">[(1,'=',1)]</field>
			<field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
		</record>

		<record model="ir.rule" id="hr_employee_overtime_personal">
			<field name="name">Overtime Report - Personal</field>
			<field name="model_id" ref="model_hr_employee_overtime" />
			<field name="groups" eval="[(4,ref('base.group_user'))]" />
			<field name="domain_force">[('employee_id.user_id','=',user.id)]</field>
			<field eval="1" name="perm_read" />
			<field eval="0" name="perm_write" />
			<field eval="0" name="perm_unlink" />
			<field eval="0" name="perm_create" />
		</record>

		<record model="ir.rule"
			id="hr_employee_overtime_team_lead_rule">
			<field name="name">Overtime Report - Team Lead</field>
			<field name="model_id" ref="model_hr_employee_overtime" />
			<field name="groups"
				eval="[(4,ref('viin_hr_overtime.group_overtime_team_approval'))]" />
			<field name="domain_force">[
            	'|',
            	('employee_id', 'in', (user.employee_id.subordinate_ids | user.employee_ids.subordinate_ids).ids),
            	('employee_id.department_id.manager_id.user_id', '=', user.id)
            	]</field>
			<field eval="1" name="perm_read" />
			<field eval="1" name="perm_write" />
			<field eval="1" name="perm_unlink" />
			<field eval="1" name="perm_create" />
		</record>

		<record model="ir.rule" id="hr_employee_overtime_officer">
			<field name="name">Overtime Report - Overtime Officer</field>
			<field name="model_id" ref="model_hr_employee_overtime"></field>
			<field name="groups"
				eval="[(4,ref('viin_hr_overtime.group_overtime_officer'))]" />
			<field name="domain_force">[(1,'=',1)]</field>
			<field eval="1" name="perm_read" />
			<field eval="0" name="perm_write" />
			<field eval="0" name="perm_unlink" />
			<field eval="0" name="perm_create" />
		</record>

		<!-- Multi company rules -->
		<record id="hr_overtime_rule_multi_company_rule"
			model="ir.rule">
			<field name="name">Overtime Report Multi-Company</field>
			<field name="model_id" ref="model_hr_overtime_rule" />
			<field name="global" eval="True" />
			<field name="domain_force">['|',('company_id','=',False),('company_id','in',company_ids)]</field>
		</record>

		<record id="hr_overtime_plan_multi_company_rule"
			model="ir.rule">
			<field name="name">Overtime Plan Multi-Company</field>
			<field name="model_id" ref="model_hr_overtime_plan" />
			<field name="global" eval="True" />
			<field name="domain_force">['|',('company_id','=',False),('company_id','in',company_ids)]</field>
		</record>

		<record id="hr_overtime_plan_line_multi_company_rule"
			model="ir.rule">
			<field name="name">Overtime Plan Line Multi-Company</field>
			<field name="model_id" ref="model_hr_overtime_plan_line" />
			<field name="global" eval="True" />
			<field name="domain_force">['|',('overtime_plan_id.company_id','=',False),('overtime_plan_id.company_id','in',company_ids)]</field>
		</record>

		<record id="hr_overtime_reason_multi_company_rule"
			model="ir.rule">
			<field name="name">Overtime Plan Line Multi-Company</field>
			<field name="model_id" ref="model_hr_overtime_reason" />
			<field name="global" eval="True" />
			<field name="domain_force">['|',('company_id','=',False),('company_id','in',company_ids)]</field>
		</record>

		<record id="hr_employee_overtime_multi_company_rule"
			model="ir.rule">
			<field name="name">Overtime Report Multi-Company</field>
			<field name="model_id" ref="model_hr_employee_overtime" />
			<field name="global" eval="True" />
			<field name="domain_force">['|',('company_id','=',False),('company_id','in',company_ids)]</field>
		</record>
	</data>
</odoo>
