<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="base.module_category_website_documentation" model="ir.module.category">
			<field name="name">Website Documentation</field>
			<field name="description">Document Management</field>
			<field name="sequence">-1</field>
		</record>

		<record id="group_website_doc_editor" model="res.groups">
			<field name="name">Restricted Docs Editor</field>
			<field name="category_id" ref="base.module_category_website_documentation" />
			<field name="comment">User can create/write document</field>
			<field name="implied_ids" eval="[(4, ref('base.group_user')), (4, ref('website.group_website_publisher'))]" />
		</record>

		<record id="group_website_doc_reviewer" model="res.groups">
			<field name="name">Docs Reviewer</field>
			<field name="category_id" ref="base.module_category_website_documentation" />
			<field name="comment">User can delete document of Restricted Docs Editor, create/edit Category</field>
			<field name="implied_ids" eval="[(4, ref('to_website_docs.group_website_doc_editor')), (4, ref('website.group_website_designer'))]" />
		</record>

		<record id="group_website_doc_designer" model="res.groups">
			<field name="name">Docs Designer</field>
			<field name="category_id" ref="base.module_category_website_documentation" />
			<field name="comment">User can publish document/category</field>
			<field name="implied_ids" eval="[(4, ref('to_website_docs.group_website_doc_reviewer'))]" />
		</record>

		<record id="group_website_doc_manager" model="res.groups">
			<field name="name">Docs Manager</field>
			<field name="category_id" ref="base.module_category_website_documentation" />
			<field name="implied_ids" eval="[(4, ref('group_website_doc_designer'))]" />
			<field name="comment">The user has full access right to categories, documents, settings and security rules.</field>
			<field name="users" eval="[(4, ref('base.user_root')),(4, ref('base.user_admin'))]" />
		</record>
	</data>

	<data noupdate="1">
		<!-- editor: Edit/Delete Document when assigned to document, with state is draft/confirmed/rejected-->
  		<record id="document_editor_edit" model="ir.rule">
			<field name="name">Document Editor - Edit</field>
			<field name="model_id" ref="model_website_document" />
			<field name="domain_force">[('user_id','=',user.id), ('state', 'in', ['draft', 'confirmed', 'rejected'])]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_editor'))]" />
			<field name="perm_read" eval="False" />
			<field name="perm_create" eval="False" />
 			<field name="perm_write" eval="True" />
			<field name="perm_unlink" eval="False" />
		</record>
		<!-- editor: Edit/Delete Document when assigned to document, is author,  with state is draft/confirmed/rejected-->
  		<record id="document_editor_delete" model="ir.rule">
			<field name="name">Document Editor - Delete</field>
			<field name="model_id" ref="model_website_document" />
			<field name="domain_force">[('user_id','=',user.id), ('author_id.user_ids','=',user.id), ('state', 'in', ['draft', 'confirmed', 'rejected'])]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_editor'))]" />
			<field name="perm_read" eval="False" />
			<field name="perm_create" eval="False" />
 			<field name="perm_write" eval="True" />
			<field name="perm_unlink" eval="True" />
		</record>

		<record id="document_reviewer" model="ir.rule">
			<field name="name">Document Reviewer</field>
			<field name="model_id" ref="model_website_document" />
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_reviewer'))]" />
			<field name="perm_read" eval="True" />
			<field name="perm_write" eval="True" />
			<field name="perm_create" eval="True" />
			<field name="perm_unlink" eval="True" />
		</record>

		<!-- editor: Edit Document Content when assigned to document with state is draft/confirmed/rejected -->
  		<record id="document_content_editor_edit" model="ir.rule">
			<field name="name">Document Content Editor</field>
			<field name="model_id" ref="model_website_document_content" />
			<field name="domain_force">[('document_id.user_id','=',user.id), ('state', 'in', ['draft', 'confirmed', 'rejected'])]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_editor'))]" />
			<field name="perm_read" eval="False" />
			<field name="perm_create" eval="False" />
 			<field name="perm_write" eval="True" />
			<field name="perm_unlink" eval="False" />
		</record>

		<!-- editor: Edit/Delete Document Content when assigned to document, is author,  with state is draft/confirmed/rejected-->
  		<record id="document_content_editor_delete" model="ir.rule">
			<field name="name">Document Content Editor</field>
			<field name="model_id" ref="model_website_document_content" />
			<field name="domain_force">[('document_id.user_id','=',user.id), ('document_id.author_id.user_ids','=',user.id), ('state', 'in', ['draft', 'confirmed', 'rejected'])]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_editor'))]" />
			<field name="perm_read" eval="False" />
			<field name="perm_create" eval="False" />
 			<field name="perm_write" eval="True" />
			<field name="perm_unlink" eval="True" />
		</record>

		<record id="document_content_reviewer" model="ir.rule">
			<field name="name">Document Content Reviewer</field>
			<field name="model_id" ref="model_website_document_content" />
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_reviewer'))]" />
			<field name="perm_read" eval="True" />
			<field name="perm_write" eval="True" />
			<field name="perm_create" eval="True" />
			<field name="perm_unlink" eval="True" />
		</record>

		<record id="doc_category_reviewer" model="ir.rule">
			<field name="name">Document Category Reviewer</field>
			<field name="model_id" ref="model_website_doc_category" />
			<field name="domain_force">[('type','=','category')]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_reviewer'))]" />
			<field name="perm_read" eval="False" />
			<field name="perm_write" eval="True" />
			<field name="perm_create" eval="True" />
			<field name="perm_unlink" eval="False" />
		</record>

		<record id="doc_not_category_reviewer" model="ir.rule">
			<field name="name">Document Category Reviewer</field>
			<field name="model_id" ref="model_website_doc_category" />
			<field name="domain_force">[('type','!=','category')]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_reviewer'))]" />
			<field name="perm_read" eval="False" />
			<field name="perm_write" eval="True" />
			<field name="perm_create" eval="False" />
			<field name="perm_unlink" eval="False" />
		</record>

		<record id="doc_category_manager" model="ir.rule">
			<field name="name">Document Category Manager</field>
			<field name="model_id" ref="model_website_doc_category" />
			<field name="domain_force">[(1,'=',1)]</field>
			<field name="groups" eval="[(4, ref('to_website_docs.group_website_doc_manager'))]" />
			<field name="perm_read" eval="True" />
			<field name="perm_write" eval="True" />
			<field name="perm_create" eval="True" />
			<field name="perm_unlink" eval="True" />
		</record>
	</data>
</odoo>
