<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<!-- Document -->
		<record id="document_form" model="ir.ui.view">
			<field name="name">website.document.form</field>
			<field name="model">website.document</field>
			<field name="arch" type="xml">
				<form string="Document">
					<header>
						<button name="action_confirm" string="Confirm"
							confirm="Confirm and wait for approval" type="object"
							class="oe_highlight" states="draft" />
						<button name="action_reconfirm" string="Confirm"
							confirm="Reconfirm and wait for approval" type="object"
							class="oe_highlight" states="rejected"/>
						<button name="action_approve" string="Approve" type="object" class="oe_highlight" states="confirmed" groups="to_website_docs.group_website_doc_reviewer"/>
						<button name="action_reject" string="Reject" type="object" states="confirmed" groups="to_website_docs.group_website_doc_reviewer"/>
						<button name="action_cancel" string="Cancel" groups="to_website_docs.group_website_doc_reviewer"
							confirm="Cancellation will also unpublish the document. Are you sure to cancel it?"
							type="object" states="confirmed,approved,rejected"/>
						<button name="action_draft" string="Set to Draft"
							type="object" class="oe_highlight" states="cancelled" groups="to_website_docs.group_website_doc_reviewer"/>
						<field name="state" widget="statusbar"
							statusbar_visible="draft,confirmed,approved,rejected,cancelled" />
					</header>
					<sheet>
						<div class="oe_button_box" name="button_box">
							<button name="action_view_contents" type="object" class="oe_stat_button" icon="fa-book" help="Show all the contents belong to this document">
								<field name="contents_count" widget="statinfo" string="Content Versions"/>
							</button>
							<field name="id" invisible="1" />
							<field name="is_published" widget="website_redirect_button" attrs="{'readonly': [('id', '=', False)]}" />
						</div>
						<div class="oe_title">
							<label class="oe_edit_only" for="name"
								string="Document Name" />
							<h1>
								<field name="name" placeholder="Document Name" />
								<field name="id" invisible="1" />
							</h1>
						</div>
						<group>
							<field name="introtext_length" />
						</group>
						<notebook>
							<page string="
								General Information "
								name="general_information">
								<group name="group_general">
									<group>
										<field name="category_id"
											domain="[('document_type', 'in', ['hash', 'link']), ('type', '=', 'category')]"
											groups="to_website_docs.group_website_doc_editor" />
										<field name="lang_ids" widget="many2many_tags" />
										<field name="user_id"
											options="{'no_create': True, 'no_quick_edit': True, 'no_create_edit': True, 'no_open': True}"
											groups="to_website_docs.group_website_doc_editor" />
									</group>
									<group>
										<field name="date_published" readonly="1" />
										<field name="author_id" readonly="1"
											groups="to_website_docs.group_website_doc_editor" />
										<field name="tag_ids" widget="many2many_tags" />
										<field name="validator_id"
											groups="to_website_docs.group_website_doc_reviewer"
											readonly="1" />
									</group>
								</group>
							</page>
						</notebook>
					</sheet>
					<div class="oe_chatter">
	                    <field name="message_follower_ids"  />
	                    <field name="activity_ids"  />
	                    <field name="message_ids" />
	                </div>
				</form>
			</field>
		</record>

		<record id="document_tree" model="ir.ui.view">
			<field name="name">website.document.tree</field>
			<field name="model">website.document</field>
			<field name="arch" type="xml">
				<tree string="Document">
					<field name="name" />
					<field name="category_id" />
					<field name="lang_ids" widget="many2many_tags" />
					<field name="user_id" />
					<field name="state" />
					<field name="website_published" />
				</tree>
			</field>
		</record>

		<record id="document_filter" model="ir.ui.view">
			<field name="name">website.document.filter</field>
			<field name="model">website.document</field>
			<field name="arch" type="xml">
				<search string="Search">
					<field name="name" />
					<separator />
					<filter name="ftr_assigned" string="Assigned" domain="[('user_id','=',uid)]" />
					<separator />
					<filter name="ftr_author" string="is Author" domain="[('author_id.user_ids','in',[uid])]" />
					<separator />
					<field name="lang_ids" />
					<field name="category_id" string="Category"
						filter_domain="['|', ('category_id.name', 'ilike', self), ('category_id.parent_id.name', 'ilike', self)]" />
					<separator />
					<filter string="Draft" name="filter_draft"
						domain="[('state','=','draft')]" />
					<filter string="Confirmed" name="filter_confirm"
						domain="[('state','=','confirmed')]" />
					<filter string="Approved" name="filter_approved"
						domain="[('state','=','approved')]" />
					<separator />
					<filter string="Published" name="filter_published"
						domain="[('website_published','=',True)]" />
					<filter string="Unpublished" name="filter_unpublished"
						domain="[('website_published','=',False)]" />
					<group expand="0" string="Group By">
						<filter string="Category" name="grp_category" domain="[]"
							context="{'group_by':'category_id'}" />
						<filter string="Assigner" name="grp_user" domain="[]"
							context="{'group_by':'user_id'}" />
						<filter string="Author" name="grp_author" domain="[]"
							context="{'group_by':'author_id'}" />
					</group>
				</search>
			</field>
		</record>

		<record id="document_action" model="ir.actions.act_window">
			<field name="name">Document</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">website.document</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{}</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Click to create a new document.
				</p>
				<p>
					Document
				</p>
			</field>
		</record>

		<menuitem id="document_menu" sequence="1" name="Document"
			parent="menu_base_docs" action="document_action" />
	</data>
</odoo>
