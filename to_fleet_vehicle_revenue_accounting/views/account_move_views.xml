<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<record model="ir.ui.view" id="account_move_view_form">
			<field name="name">account.move.form</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_move_form" />
			<field name="arch" type="xml">
				<xpath
					expr="//field[@name='invoice_line_ids']/tree/field[@name='account_id']"
					position="after">
					<field name="fleet_vehicle_revenue_ids" invisible="1" />
				</xpath>
				<xpath
					expr="//field[@name='invoice_line_ids']/tree/field[@name='currency_id']"
					position="after">
					<field name="has_vehicle_revenue" widget="widgetbusrevbutton"
						invisible="context.get('created_from_vehicle_revenue', 0)" />
				</xpath>
				<xpath
					expr="//notebook/page[@id='invoice_tab']/field[@name='invoice_line_ids']"
					position="after">
					<separator string="Linked Fleet Vehicle Revenues"
						attrs="{'invisible':[('type','in',['in_invoice','in_refund'])]}"
						groups="base.group_no_one" />
					<field name="fleet_vehicle_revenue_ids"
						attrs="{'invisible':[('type','in',['in_invoice','in_refund'])]}"
						groups="base.group_no_one">
						<tree name="fleet_vehicle_revenue_ids">
							<field name="vehicle_id" />
							<field name="revenue_subtype_id" />
							<field name="product_id" />
							<field name="customer_id" context="{'res_partner_search_mode': 'customer', 'show_address': 1, 'default_is_company': True, 'show_vat': True}"/>
							<field name="amount" />
							<field name="date" />
						</tree>
					</field>
				</xpath>
			</field>
		</record>
	</data>
</odoo>
