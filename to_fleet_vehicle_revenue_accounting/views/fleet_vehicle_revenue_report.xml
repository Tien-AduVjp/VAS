<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<record id="fleet_vehicle_revenue_report_view_tree"
		model="ir.ui.view">
		<field name="name">fleet.vehicle.revenue.report.tree</field>
		<field name="model">fleet.vehicle.revenue.report</field>
		<field name="arch" type="xml">
			<tree string="Vehicles revenues">
				<field name="name" />
				<field name="date" />
				<field name="amount" />
				<field name="customer_id" />				
				<field name="move_id" />
				<field name="communication" />
				<field name="vehicle_id" />
				<field name="company_id" groups="base.group_multi_company" />
			</tree>
		</field>
	</record>

	<record id="fleet_vehicle_revenue_report_view_pivot"
		model="ir.ui.view">
		<field name="name">fleet.vehicle.revenue.report.pivot</field>
		<field name="model">fleet.vehicle.revenue.report</field>
		<field name="arch" type="xml">
			<pivot string="Vehicles revenues">
				<field name="communication" type="row" />
				<field name="date" type="col" />
				<field name="amount" type="measure" />
			</pivot>
		</field>
	</record>

	<record id="fleet_vehicle_revenue_report_view_graph"
		model="ir.ui.view">
		<field name="name">fleet.vehicle.revenue.report.graph</field>
		<field name="model">fleet.vehicle.revenue.report</field>
		<field name="arch" type="xml">
			<graph string="Vehicles revenues">
				<field name="vehicle_id" type="row" />
				<field name="communication" type="col" />
				<field name="amount" type="measure" />
			</graph>
		</field>
	</record>

	<record id="fleet_vehicle_revenues_report_view_search"
		model="ir.ui.view">
		<field name="name">fleet.vehicle.revenue.report.search</field>
		<field name="model">fleet.vehicle.revenue.report</field>
		<field name="arch" type="xml">
			<search string="Vehicles revenues">
				<field name="vehicle_id" />
				<separator />
				<field name="communication" />
				<field name="revenue_subtype_id" />
				<field name="product_id" />
				<separator />
				<field name="date" />
				<separator />
				<filter name="ftr_not_invoiced" string="Not Invoiced"
					domain="[('state','=','not_invoiced')]" />
				<filter name="ftr_invoiced_not_paid"
					string="Invoiced but Not Paid"
					domain="[('state','=','invoiced_not_paid')]" />
				<filter name="ftr_invoiced_paid" string="Invoiced and Paid"
					domain="[('state','=','invoiced_paid')]" />
				<separator />
				<filter string="This Year" name="thisyear"
					domain="[('date','&gt;=',time.strftime('%%Y-01-01'))]" />
				<filter string="Last Year" name="ftr_last_year"
					domain="[('date','&gt;=',(context_today()-relativedelta(years=1)).strftime('%Y-01-01')),('date','&lt;',time.strftime('%Y-01-01'))]" />

				<group expand="1" name="group_by" string="Group By">
					<filter name="groupby_revenue_type"
						context="{'group_by': 'revenue_type'}" string="Revenue Type" />
					<filter name="groupby_revenue_subtype_id"
						context="{'group_by': 'revenue_subtype_id'}"
						string="Revenue Subtype" />
					<filter name="groupby_vehicle_id"
						context="{'group_by': 'vehicle_id'}" string="Vehicle" />
					<separator />
					<filter name="groupby_date"
						context="{'group_by': 'date:month'}" string="Month"
						help="Vehicle Revenues by Month" />
					<filter name="groupby_year"
						context="{'group_by': 'date:year'}" string="Year" />
				</group>
			</search>
		</field>
	</record>

	<record id="fleet_revenues_reporting_action"
		model="ir.actions.act_window">
		<field name="name">Revenues Analysis</field>
		<field name="res_model">fleet.vehicle.revenue.report</field>
		<field name="view_mode">pivot,graph,tree</field>
		<field name="view_id"></field>  <!-- force empty -->
		<field name="context">{"search_default_thisyear":1,}</field>
	</record>

</odoo>
