<?xml version ="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="viin-map-popup">
        <div>
            <table class="o_viin_map_popup_table">
				<tbody>
					<tr t-foreach="fields" t-as="field">
						<td class="content_label">
							<t t-esc="field.label" />
						</td>
						<td class="content_value">
							<t t-esc="field.value" />
						</td>
					</tr>
				</tbody>
			</table>
			<div class="text-left mt8">
				<button class="btn btn-sm btn-primary o_viin_map_edit">Edit</button>
				<a class="btn btn-sm btn-primary o_viin_map_direction" t-att-href="direction_url" target="_blank">Get directions</a>
			</div>
        </div>
    </t>

	<t t-name="ViinMapView.buttons">
        <div>
            <a class="btn btn-primary" t-att-href="widget" target="_blank">Open in Google Maps</a>
        </div>
    </t>

	<t t-name="ViinMapView.pinlist">
        <div class="o_viin_pin_list_container d-none d-lg-block offset-10 col-2">
            <div class="o_viin_pin_list_header">
                <header>
                    <i class="fa fa-list" />
					<span t-esc="widget.panelTitle" />
                </header>
            </div>
			<t t-if="widget.numbering">
                <ol class="o_viin_pin_list_details">
                    <t t-call="ViinMapView.pinListItem" />
                </ol>
            </t>
			<t t-else="">
                <ul class="o_viin_pin_list_details">
                    <t t-call="ViinMapView.pinListItem" />
                </ul>
            </t>
        </div>
    </t>

	<t t-name="ViinMapView.pinListItem">
        <t t-foreach="widget.state.records" t-as="r">
            <li
				t-att-class="r.partner and r.partner.partner_latitude and r.partner.partner_longitude ? 'o_pin_located' : undefined"
				t-att-title="r.partner and r.partner.partner_latitude and r.partner.partner_longitude ? undefined : 'Could not locate'"
			>
                <a href=""
					t-if="r.partner and r.partner.partner_latitude and r.partner.partner_longitude"
					t-att-data-lat="r.partner.partner_latitude"
					t-att-data-lng="r.partner.partner_longitude"
					t-att-data-id="r.partner.id">
                    <t t-esc="r.display_name" />
                </a>
				<span t-else="" class="text-muted">
                    <t t-esc="r.display_name" />
                </span>
            </li>
        </t>
    </t>

</templates>
