<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="stock_picking_view_form_inherited" model="ir.ui.view">
		<field name="name">stock.picking.form.inherited</field>
		<field name="model">stock.picking</field>
		<field name="inherit_id" ref="stock.view_picking_form" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='state']" position="after">
				<field name="is_asset_allocation" invisible="1" />
			</xpath>
			
			<xpath expr="//sheet/div[@name='button_box']" position="inside">
				<button string="Assets" type="object" name="action_view_account_assets" attrs="{'invisible': [('is_asset_allocation', '=', False)]}"
						class="oe_stat_button" icon="fa-arrows" groups="to_account_asset.group_asset_manager"/>
			</xpath>

            <xpath expr="//field[@name='move_ids_without_package']/tree/field[@name='product_id']" position="after">
                <field name="asset_category_id" attrs="{'column_invisible': [('parent.is_asset_allocation', '=', False)],
                                                        'required': [('parent.is_asset_allocation', '=', True)]}"/>
            </xpath>
		</field>
	</record>
</odoo>
